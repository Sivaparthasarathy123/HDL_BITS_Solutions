module top_module(
    input clk,
    input areset,    // Freshly brainwashed Lemmings walk left.
    input bump_left,
    input bump_right,
    input ground,
    output walk_left,
    output walk_right,
    output aaah ); 

    parameter LEFT = 0,RIGHT =1,GROUND = 3;
    reg [1:0]state,next_state,prev_state;
    
always @(*) begin
    case (state)
        LEFT: begin
            if (!ground)
                next_state = GROUND;
            else if (bump_left)
                next_state = RIGHT;
            else
                next_state = LEFT;
            prev_state = LEFT;
        end

        RIGHT: begin
            if (!ground)
                next_state = GROUND;
            else if (bump_right)
                next_state = LEFT;
            else
                next_state = RIGHT;
            prev_state = RIGHT;
        end

        GROUND: begin
            if (!ground)
                next_state = GROUND;
            else
                next_state = prev_state;
        end

        default: begin
            next_state = LEFT;
            prev_state = LEFT;
        end
    endcase
end
    
    always@(posedge clk or posedge areset)begin
        if(areset)
            state <= LEFT;
        else
            state <= next_state;
    end
    
    assign walk_left = (state == LEFT); //? 1'd1 : 1'd0;
        assign walk_right = (state == RIGHT); //? 1'd1 : 1'd0;
    assign aaah  = (state == GROUND);//? 1'd1 : 1'd0;

endmodule
